# AWS ECS Service - Terraform Module

This is a Terraform module that creates an ECS (Elastic Container Service) service in AWS (Amazon Web Services). The module takes various inputs, such as the name and environment of the service, the cluster and subnets to use, and the container definitions. The container definitions include details such as the Docker image to use, the port mappings, and the desired count of containers. The module can also mount EFS volumes in the containers. Overall, this module simplifies the process of setting up an ECS service in AWS.

## How to use this module



<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.0 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | >= 5.0.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | 5.6.2 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [aws_appautoscaling_policy.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/appautoscaling_policy) | resource |
| [aws_appautoscaling_target.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/appautoscaling_target) | resource |
| [aws_cloudwatch_log_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_group) | resource |
| [aws_cloudwatch_log_stream.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_stream) | resource |
| [aws_cloudwatch_metric_alarm.cpu_utilization](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.memory_utilization](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_ecs_service.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ecs_service) | resource |
| [aws_ecs_task_definition.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ecs_task_definition) | resource |
| [aws_iam_policy.execution_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_policy) | resource |
| [aws_iam_policy.task_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_policy) | resource |
| [aws_iam_role.execution_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role.task_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role_policy_attachment.additional_policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment) | resource |
| [aws_iam_role_policy_attachment.execution_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment) | resource |
| [aws_iam_role_policy_attachment.task_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment) | resource |
| [aws_kms_alias.cloudwatch_logs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/kms_alias) | resource |
| [aws_kms_key.cloudwatch_logs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/kms_key) | resource |
| [aws_kms_key_policy.cloudwatch_logs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/kms_key_policy) | resource |
| [aws_lb_listener_rule.ecs_tasks](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_listener_rule) | resource |
| [aws_lb_target_group.ecs_tasks](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_target_group) | resource |
| [aws_opensearchserverless_access_policy.data](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/opensearchserverless_access_policy) | resource |
| [aws_security_group.ecs_tasks](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group) | resource |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_iam_policy_document.execution_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.execution_role_trust](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.task_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.task_role_trust](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_add_security_groups"></a> [add\_security\_groups](#input\_add\_security\_groups) | [OPTIONAL] list of additional security groups | `list(any)` | n/a | yes |
| <a name="input_additional_policy_arn"></a> [additional\_policy\_arn](#input\_additional\_policy\_arn) | [OPTIONAL] A list of additional policy ARNs to attach to the ECS Service. | `string` | `""` | no |
| <a name="input_alb_health_check_config"></a> [alb\_health\_check\_config](#input\_alb\_health\_check\_config) | [OPTIONAL] The health check configuration for the ECS Service.<br>    - healthy\_threshold (number): The number of consecutive health checks successes required before moving the ECS Service to an Healthy state.<br>    - unhealthy\_threshold (number): The number of consecutive health check failures required before moving the ECS Service to an Unhealthy state.<br>    - timeout (number): The amount of time, in seconds, during which no response means a failed health check.<br>    - interval (number): The approximate amount of time, in seconds, between health checks of an individual target.<br>    - matcher (string): The HTTP codes to use when checking for a successful response from a target.<br>    - protocol (string): The protocol to use when performing health checks on the ECS Service. Must be one of the following: HTTP, HTTPS, TCP, TLS. | <pre>object({<br>    healthy_threshold   = number<br>    unhealthy_threshold = number<br>    timeout             = number<br>    interval            = number<br>    matcher             = string<br>    protocol            = string<br>  })</pre> | <pre>{<br>  "healthy_threshold": 3,<br>  "interval": 30,<br>  "matcher": "200",<br>  "protocol": "HTTP",<br>  "timeout": 3,<br>  "unhealthy_threshold": 2<br>}</pre> | no |
| <a name="input_alb_listener_rules"></a> [alb\_listener\_rules](#input\_alb\_listener\_rules) | [REQUIRED] The ALB configuration for the ECS Service.<br>    - name (string): The name of the ALB listener rule.<br>    - listener\_arn (string): The ARN of the ALB listener to attach the service to.<br>    - tpc\_port (number): The port to use for the ALB listener rule.<br>    - healthcheck\_path (string): The path to use for the ALB healthcheck.<br>    - path\_pattern (list(string)): List of path patterns to match.<br>    - host\_header (list(string)): List of host headers to match.<br>    - priority (number): The priority for the rule between 1 and 50000. | <pre>list(object({<br>    name                = string<br>    listener_arn        = optional(string)<br>    path_pattern        = list(string)<br>    host_header         = optional(list(string))<br>    priority            = optional(number)<br>    oidc_authentication = optional(map(string))<br>  }))</pre> | n/a | yes |
| <a name="input_alb_target_groups"></a> [alb\_target\_groups](#input\_alb\_target\_groups) | [REQUIRED] The ALB Target Group configuration for the ECS Service.<br>    - name (string): The name of the ALB target group.<br>    - port (number): The port to use for the ALB target group.<br>    - slow\_start (number): Amount of time (in seconds) for targets to warm up before the load balancer sends them a full share of requests<br>    - health (object): Health check configuration if we don't want to use a single config set for all target groups<br>      - path (string): URI to be requested<br>      - healthy\_threshold (number): number of checks that should pass before considering target healthy<br>      - unhealthy\_threshold (number): number of checks that should fail before considering target unhealthy<br>      - timeout (number): how long it should wait for a check to get a response (in seconds)<br>      - interval (number): seconds between checks<br>      - matcher (number): HTTP code that is expected in the response<br>      - protocol (string): protocol in which the check should be sent (HTTP, HTTPS, TCP, etc)<br>    - stickiness (object): Stickiness configuration block<br>      - type (string): The type of sticky sessions. The only current possible values are lb\_cookie, app\_cookie for ALBs, source\_ip for NLBs, and source\_ip\_dest\_ip, source\_ip\_dest\_ip\_proto for GWLBs.<br>      - cookie\_duration (number): Only used when the type is lb\_cookie. The time period, in seconds, during which requests from a client should be routed to the same target. After this time period expires, the load balancer-generated cookie is considered stale. The range is 1 second to 1 week (604800 seconds). The default value is 1 day (86400 seconds).<br>      - cookie\_name (string): Name of the application based cookie. AWSALB, AWSALBAPP, and AWSALBTG prefixes are reserved and cannot be used. Only needed when type is app\_cookie<br>      - enabled (bool): Boolean to enable / disable stickiness. Default is true | <pre>list(<br>    object({<br>      name       = string<br>      port       = number<br>      protocol   = string<br>      slow_start = optional(number)<br>      health = optional(object({<br>        path                = string<br>        healthy_threshold   = optional(number)<br>        unhealthy_threshold = optional(number)<br>        timeout             = optional(number)<br>        interval            = optional(number)<br>        matcher             = optional(number)<br>        protocol            = optional(string)<br>      }))<br>      stickiness = optional(object({<br>        type            = string<br>        cookie_duration = optional(number)<br>        cookie_name     = optional(string)<br>        enabled         = optional(bool)<br>      }))<br>    })<br>  )</pre> | n/a | yes |
| <a name="input_appautoscaling_config"></a> [appautoscaling\_config](#input\_appautoscaling\_config) | [REQUIRED] The App Autoscaling configuration for the ECS Service.<br>    - min\_capacity (number): The minimum capacity of the ECS Service.<br>    - max\_capacity (number): The maximum capacity of the ECS Service.<br>    - metric\_type (string): The metric type to use for the App Autoscaling configuration. Must be one of the following: ECSServiceAverageCPUUtilization, ECSServiceAverageMemoryUtilization, ALBRequestCountPerTarget.<br>    - target\_value (number): The target value for the metric type in percent.<br>    - disable\_scale\_in (bool): Whether to disable scale in for the ECS Service.<br>    - scale\_in\_cooldown (number): The cooldown in seconds before allowing another scale in activity.<br>    - scale\_out\_cooldown (number): The cooldown in seconds before allowing another scale out activity. | <pre>object({<br>    min_capacity       = number<br>    max_capacity       = number<br>    metric_type        = string<br>    target_value       = number<br>    disable_scale_in   = bool<br>    scale_in_cooldown  = optional(number)<br>    scale_out_cooldown = number<br>  })</pre> | <pre>{<br>  "disable_scale_in": false,<br>  "max_capacity": 6,<br>  "metric_type": "ECSServiceAverageCPUUtilization",<br>  "min_capacity": 2,<br>  "scale_in_cooldown": 60,<br>  "scale_out_cooldown": 60,<br>  "target_value": 80<br>}</pre> | no |
| <a name="input_appautoscaling_enabled"></a> [appautoscaling\_enabled](#input\_appautoscaling\_enabled) | [OPTIONAL] Whether to enable App Autoscaling for the ECS Service. | `bool` | `true` | no |
| <a name="input_cloudwatch_notifications"></a> [cloudwatch\_notifications](#input\_cloudwatch\_notifications) | [OPTIONAL] CloudWatch notifications configuration for the ECS Service.<br>  - cpu\_utilization\_enabled (bool): Whether to enable CloudWatch notifications for CPU utilization.<br>  - memory\_utilization\_enabled (bool): Whether to enable CloudWatch notifications for memory utilization.<br>  - cpu\_utilization\_threshold (number): The CPU utilization threshold in percent.<br>  - memory\_utilization\_threshold (number): The memory utilization threshold in percent.<br>  - notification\_topic\_arn (string): The ARN of the SNS topic to send notifications to. | <pre>object({<br>    cpu_utilization_enabled              = bool<br>    memory_utilization_enabled           = bool<br>    cpu_utilization_threshold            = number<br>    memory_utilization_threshold         = number<br>    notification_topic_arn_ok_actions    = string<br>    notification_topic_arn_alarm_actions = string<br>  })</pre> | <pre>{<br>  "cpu_utilization_enabled": false,<br>  "cpu_utilization_threshold": 80,<br>  "memory_utilization_enabled": false,<br>  "memory_utilization_threshold": 80,<br>  "notification_topic_arn_alarm_actions": "",<br>  "notification_topic_arn_ok_actions": ""<br>}</pre> | no |
| <a name="input_container_definitions"></a> [container\_definitions](#input\_container\_definitions) | [REQUIRED] Container definitions for the ECS Task Definition.<br><br>  Ref.: https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html#container_definitions<br><br>  - name (string): The name of the container.<br>  - image (string): The image URI to use for the container.<br>  - cpu (number): The number of cpu units reserved for the container.<br>  - memory (number): The hard limit (in MiB) of memory to present to the container.<br>  - essential (bool): If the container is essential.<br>  - dependsOn (list(object)): The dependencies defined for container startup and shutdown.<br>    - containerName (string): The name of the container to depend on.<br>    - condition (string): The dependency condition of the container. The following are the available conditions and their behavior:<br>      - START: This condition emulates the behavior of links and volumes today. It validates that a dependent container is started before permitting other containers to start.<br>      - COMPLETE: This condition validates that a dependent container runs to completion (exits) before permitting other containers to start. This can be useful for nonessential containers that run a script and then exit.<br>      - SUCCESS: This condition is the same as COMPLETE, but it also requires that the container exits with a zero status.<br>      - HEALTHY: This condition validates that the dependent container passes its Docker health check before permitting other containers to start. This requires that the dependent container has health checks configured. This condition is confirmed only at task startup.<br>  - memoryReservation (number): The soft limit (in MiB) of memory to reserve for the container.<br>  - portMappings (list(object)): The list of port mappings for the container.<br>    - containerPort (number): The port number on the container.<br>    - protocol (string): The protocol used for the port mapping.<br>    - cidr\_blocks list(string): Optional CIDR blocks to be used as sources<br>  - user (string): The user name to use inside the container.<br>  - ulimits (list(object)): A list of ulimits to set in the container.<br>    - name (string): The type of the ulimit.<br>    - softLimit (number): The soft limit for the ulimit type.<br>    - hardLimit (number): The hard limit for the ulimit type.<br>  - entryPoint (list(string)): The entry point that is passed to the container.<br>  - command (list(string)): The command that is passed to the container.<br>  - environment (list(object)): The environment variables to pass to a container.<br>    - name (string): The name of the environment variable.<br>    - value (string): The value of the environment variable.<br>  - secrets (list(object)): The secrets to pass to the container.<br>    - name (string): The name of the secret.<br>    - valueFrom (string): The secret to expose to the container. The value is the ARN of the secret in the Secrets Manager.<br>  - mountPoints (list(object)): The mount points for data volumes in your container.<br>    - sourceVolume (string): The name of the volume to mount.<br>    - containerPath (string): The path on the container to mount the host volume at.<br>    - readOnly (bool): If this value is true, the container has read-only access to the volume; otherwise, false.<br>  - dockerLabels (map(string)): A key/value map of labels to add to the container.<br>  - healthCheck (object): The health check command and associated configuration parameters for the container.<br>    - command (list(string)): The command that the container runs to determine whether it is healthy.<br>    - interval (number): The time period in seconds between each health check execution.<br>    - retries (number): The number of times to retry a failed health check before the container is considered unhealthy.<br>    - startPeriod (number): The optional grace period in seconds that allows containers time to bootstrap before failed health checks count towards the maximum number of retries.<br>    - timeout (number): The time period in seconds to wait for a health check to succeed before it is considered a failure.<br>  - environmentFiles (list(object)): A list of files containing the environment variables to pass to a container.<br>    - value (string): The ARN of the Amazon S3 object containing the environment variable file.<br>    - type (string): The file type to use. The only supported value is s3.<br>  - firelensConfiguration (object): The FireLens configuration for the container.<br>    - type (string): The log router to use. The valid values are fluentd or fluentbit.<br>    - options (map(string)): The options to use when configuring the log router.<br>  - linuxParameters (object): Linux-specific modifications that are applied to the container, such as Linux kernel capabilities. | <pre>list(object({<br>    name        = string<br>    image       = string<br>    log_routing = string<br>    cpu         = number<br>    memory      = number<br>    essential   = optional(bool)<br>    dependsOn = optional(list(object({<br>      containerName = string<br>      condition     = string<br>    })))<br>    memoryReservation = optional(number)<br>    portMappings = list(object({<br>      containerPort = optional(number)<br>      protocol      = optional(string)<br>      cidr_blocks   = optional(list(string))<br>    }))<br>    user = optional(string)<br>    ulimits = optional(list(object({<br>      name      = string<br>      softLimit = number<br>      hardLimit = number<br>    })))<br>    entryPoint = optional(list(string))<br>    command    = optional(list(string))<br>    environment = optional(list(object({<br>      name  = string<br>      value = string<br>    })))<br>    secrets = list(object({<br>      name      = optional(string)<br>      valueFrom = optional(string)<br>    }))<br>    mountPoints = optional(list(object({<br>      containerPath = string<br>      sourceVolume  = string<br>      readOnly      = optional(bool)<br>    })))<br>    dockerLabels = optional(map(string))<br>    healthCheck = optional(object({<br>      command     = list(string)<br>      interval    = number<br>      retries     = number<br>      startPeriod = number<br>      timeout     = number<br>    }))<br>    environmentFiles = list(object({<br>      value = optional(string)<br>      type  = optional(string)<br>    }))<br>    firelensConfiguration = optional(object({<br>      type    = string<br>      options = optional(map(string))<br>    }))<br>    linuxParameters = optional(object({<br>      capabilities = optional(object({<br>        add  = optional(list(string))<br>        drop = optional(list(string))<br>      }))<br>      devices = optional(list(object({<br>        hostPath      = string<br>        containerPath = string<br>        permissions   = optional(list(string))<br>      })))<br>      initProcessEnabled = optional(bool)<br>      maxSwap            = optional(number)<br>      sharedMemorySize   = optional(number)<br>      swappiness         = optional(number)<br>      tmpfs = optional(list(object({<br>        containerPath = string<br>        size          = number<br>        mountOptions  = optional(list(string))<br>      })))<br>    }))<br>  }))</pre> | n/a | yes |
| <a name="input_create_kms_key"></a> [create\_kms\_key](#input\_create\_kms\_key) | [OPTIONAL] If true, a KMS key will be created and used to encrypt the CloudWatch log group. | `bool` | `false` | no |
| <a name="input_deployment_percent_config"></a> [deployment\_percent\_config](#input\_deployment\_percent\_config) | [OPTIONAL] Deployment configuration for the ECS Service.<br><br>  Ref.: https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_DeploymentConfiguration.html<br><br>  - maximum\_percent (number): The upper limit (as a percentage of the service's desiredCount) of the number of running tasks that can be running in a service during a deployment.<br>  - minimum\_healthy\_percent (number): The lower limit (as a percentage of the service's desiredCount) of the number of running tasks that must remain running and healthy in a service during a deployment. | <pre>object({<br>    maximum_percent         = optional(number)<br>    minimum_healthy_percent = optional(number)<br>  })</pre> | <pre>{<br>  "maximum_percent": 200,<br>  "minimum_healthy_percent": 100<br>}</pre> | no |
| <a name="input_desired_count"></a> [desired\_count](#input\_desired\_count) | [REQUIRED] The number of instances of the task definition to place and keep running. | `number` | n/a | yes |
| <a name="input_ecr_repository_arns"></a> [ecr\_repository\_arns](#input\_ecr\_repository\_arns) | [REQUIRED] The ARNs of the ECR repositories to pull images from. | `list(string)` | `[]` | no |
| <a name="input_ecs_cluster"></a> [ecs\_cluster](#input\_ecs\_cluster) | [REQUIRED] The ECS cluster name to deploy the service to. | `string` | n/a | yes |
| <a name="input_efs_volumes"></a> [efs\_volumes](#input\_efs\_volumes) | [OPTIONAL] A list of EFS volumes to mount to the ECS Service.<br>    - file\_system\_id (string): The ID of the EFS file system.<br>    - access\_point\_id (string): The ID of the EFS access point.<br>    - root\_directory (string): The root directory to mount to the ECS Service. | <pre>list(object({<br>    volume_name             = string<br>    root_directory          = optional(string)<br>    file_system_id          = string<br>    access_point_id         = string<br>    read_only               = bool<br>    transit_encryption_port = optional(number, 2999)<br>  }))</pre> | `[]` | no |
| <a name="input_enable_execute_command"></a> [enable\_execute\_command](#input\_enable\_execute\_command) | [OPTIONAL] If true, enables ECS ExecuteCommand feature on the ECS Service. | `bool` | `true` | no |
| <a name="input_environment"></a> [environment](#input\_environment) | [REQUIRED] The enviroment to deploy the resources, Used to name and tag resources. | `string` | n/a | yes |
| <a name="input_execution_role_arn"></a> [execution\_role\_arn](#input\_execution\_role\_arn) | [OPTIONAL] ARN of the task execution role that the Amazon ECS container agent and the Docker daemon can assume. | `string` | `""` | no |
| <a name="input_fargate_compute_capacity"></a> [fargate\_compute\_capacity](#input\_fargate\_compute\_capacity) | [OPTIONAL] The amount (in GB) of memory used by the task.<br>  Ref.: https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-cpu-memory-error.html<br><br>  Example:<br>  {<br>    cpu    = 256<br>    memory = 512<br>  } | <pre>object({<br>    cpu    = number<br>    memory = number<br>  })</pre> | <pre>{<br>  "cpu": 1024,<br>  "memory": 2048<br>}</pre> | no |
| <a name="input_fargate_platform_version"></a> [fargate\_platform\_version](#input\_fargate\_platform\_version) | [OPTIONAL] The platform version on which to run your service. Only applicable for launch\_type set to FARGATE. Defaults to LATEST. | `string` | `"LATEST"` | no |
| <a name="input_host_volumes"></a> [host\_volumes](#input\_host\_volumes) | [OPTIONAL] A list of host volumes to mount to the ECS Service.<br>    - name (string): The name of the volume to mount to the ECS Service. It needs to match the name of the volume in the container definition. | <pre>list(object({<br>    volume_name = string<br>  }))</pre> | `[]` | no |
| <a name="input_https_listener_arn"></a> [https\_listener\_arn](#input\_https\_listener\_arn) | [OPTIONAL] The ARN of the HTTPS listener to attach the service to. | `string` | `""` | no |
| <a name="input_kms_key"></a> [kms\_key](#input\_kms\_key) | [OPTIONAL] The ARN of the KMS key to use to encrypt the CloudWatch log group. | `string` | `""` | no |
| <a name="input_kms_key_extra_role_arns"></a> [kms\_key\_extra\_role\_arns](#input\_kms\_key\_extra\_role\_arns) | [REQUIRED] The ARNs of the IAM roles that should be able to use the KMS key. | `list(string)` | `[]` | no |
| <a name="input_logs_retention"></a> [logs\_retention](#input\_logs\_retention) | [OPTIONAL] The number of days to retain logs for. Default is 90 days. | `number` | `90` | no |
| <a name="input_name_prefix"></a> [name\_prefix](#input\_name\_prefix) | [REQUIRED] Used to name and tag resources. | `string` | n/a | yes |
| <a name="input_name_suffix"></a> [name\_suffix](#input\_name\_suffix) | [REQUIRED] Suffix to use for naming in global resources (e.g. `main` or `dr`) | `string` | n/a | yes |
| <a name="input_opensearch_serverless_collection_name"></a> [opensearch\_serverless\_collection\_name](#input\_opensearch\_serverless\_collection\_name) | [OPTIONAL] The name of the OpenSearch collection to use for the ECS Service. | `string` | `null` | no |
| <a name="input_private_subnets"></a> [private\_subnets](#input\_private\_subnets) | [REQUIRED] A list of private subnets to place the ECS Service in. | `list(string)` | n/a | yes |
| <a name="input_retain_task_definition"></a> [retain\_task\_definition](#input\_retain\_task\_definition) | [OPTIONAL] If true, the task definition will not be deleted when the service is destroyed, this is also useful for manual rollbacks. | `bool` | `true` | no |
| <a name="input_security_group"></a> [security\_group](#input\_security\_group) | [OPTIONAL] The security group to use for the ECS Service. | `string` | `""` | no |
| <a name="input_service_name"></a> [service\_name](#input\_service\_name) | [REQUIRED] The name of the application. | `string` | n/a | yes |
| <a name="input_task_role_arn"></a> [task\_role\_arn](#input\_task\_role\_arn) | [OPTIONAL] ARN of IAM role that allows your Amazon ECS container task to make calls to other AWS services. | `string` | `""` | no |
| <a name="input_vpc_cidr"></a> [vpc\_cidr](#input\_vpc\_cidr) | [REQUIRED] The VPC CIDR block, Required format: '0.0.0.0/0' | `string` | n/a | yes |
| <a name="input_vpc_id"></a> [vpc\_id](#input\_vpc\_id) | [REQUIRED] The VPC ID | `string` | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_target_groups_arn"></a> [target\_groups\_arn](#output\_target\_groups\_arn) | target groups arn |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->